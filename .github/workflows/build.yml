name: Run Build

on:
 pull_request:
  branches: [develop,main]

jobs:
 build:
  runs-on: ubuntu-latest

  steps:
   - name : checkout
     uses: actions/checkout@v4.2.1

   - name: Setup Java JDK
     uses: actions/setup-java@v4.4.0
     with:
      java-version: 21
      distribution: temurin

   - name: Install yarn dependencies
     run: yarn install 
     
   - name: Grant execute permissions for gradlew & run unit test
     run: |
      cd android
      chmod +x gradlew
      ./gradlew test

   - name: Assemble Release Bundle
     run: |
        cd android
        ./gradlew bundleRelease
